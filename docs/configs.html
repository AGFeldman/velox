
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

    <title>Configuration properties &#8212; Velox  documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/nature.css" />
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="PyVelox: Python bindings and extensions for Velox" href="bindings/python/README_generated_pyvelox.html" />
    <link rel="prev" title="Aggregate Functions" href="functions/spark/aggregate.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="bindings/python/README_generated_pyvelox.html" title="PyVelox: Python bindings and extensions for Velox"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="functions/spark/aggregate.html" title="Aggregate Functions"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Velox  documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Configuration properties</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="configuration-properties">
<h1>Configuration properties<a class="headerlink" href="#configuration-properties" title="Permalink to this heading">¶</a></h1>
<section id="generic-configuration">
<h2>Generic Configuration<a class="headerlink" href="#generic-configuration" title="Permalink to this heading">¶</a></h2>
<table class="docutils align-default">
<colgroup>
<col style="width: 18%" />
<col style="width: 9%" />
<col style="width: 9%" />
<col style="width: 64%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Property Name</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Default Value</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>preferred_output_batch_bytes</p></td>
<td><p>integer</p></td>
<td><p>10MB</p></td>
<td><p>Preferred size of batches in bytes to be returned by operators from Operator::getOutput. It is used when an
estimate of average row size is known. Otherwise preferred_output_batch_rows is used.</p></td>
</tr>
<tr class="row-odd"><td><p>preferred_output_batch_rows</p></td>
<td><p>integer</p></td>
<td><p>1024</p></td>
<td><p>Preferred number of rows to be returned by operators from Operator::getOutput. It is used when an estimate of
average row size is not known. When the estimate of average row size is known, preferred_output_batch_bytes is used.</p></td>
</tr>
<tr class="row-even"><td><p>max_output_batch_rows</p></td>
<td><p>integer</p></td>
<td><p>10000</p></td>
<td><p>Max number of rows that could be return by operators from Operator::getOutput. It is used when an estimate of
average row size is known and preferred_output_batch_bytes is used to compute the number of output rows.</p></td>
</tr>
</tbody>
</table>
</section>
<section id="memory-management">
<h2>Memory Management<a class="headerlink" href="#memory-management" title="Permalink to this heading">¶</a></h2>
<table class="docutils align-default">
<colgroup>
<col style="width: 18%" />
<col style="width: 9%" />
<col style="width: 9%" />
<col style="width: 64%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Property Name</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Default Value</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>max_partial_aggregation_memory</p></td>
<td><p>integer</p></td>
<td><p>16MB</p></td>
<td><p>Maximum amount of memory in bytes for partial aggregation results. Increasing this value can result in less
network transfer and lower CPU utilization by allowing more groups to be kept locally before being flushed,
at the cost of additional memory usage.</p></td>
</tr>
<tr class="row-odd"><td><p>max_extended_partial_aggregation_memory</p></td>
<td><p>integer</p></td>
<td><p>16MB</p></td>
<td><p>Maximum amount of memory in bytes for partial aggregation results if cardinality reduction is below
<cite>partial_aggregation_reduction_ratio_threshold</cite>. Every time partial aggregate results size reaches
<cite>max_partial_aggregation_memory</cite> bytes, the results are flushed. If cardinality reduction is below
<cite>partial_aggregation_reduction_ratio_threshold</cite>,
i.e. <cite>number of result rows / number of input rows &gt; partial_aggregation_reduction_ratio_threshold</cite>,
memory limit for partial aggregation is automatically doubled up to <cite>max_extended_partial_aggregation_memory</cite>.
This adaptation is disabled by default, since the value of <cite>max_extended_partial_aggregation_memory</cite> equals the
value of <cite>max_partial_aggregation_memory</cite>. Specify higher value for <cite>max_extended_partial_aggregation_memory</cite> to enable.</p></td>
</tr>
</tbody>
</table>
</section>
<section id="spilling">
<h2>Spilling<a class="headerlink" href="#spilling" title="Permalink to this heading">¶</a></h2>
<table class="docutils align-default">
<colgroup>
<col style="width: 18%" />
<col style="width: 9%" />
<col style="width: 9%" />
<col style="width: 64%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Property Name</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Default Value</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>spill_enabled</p></td>
<td><p>boolean</p></td>
<td><p>false</p></td>
<td><p>Spill memory to disk to avoid exceeding memory limits for the query.</p></td>
</tr>
<tr class="row-odd"><td><p>spiller-spill-path</p></td>
<td><p>string</p></td>
<td><p>/tmp</p></td>
<td><p>Directory where spilled content is written.</p></td>
</tr>
<tr class="row-even"><td><p>aggregation_spill_enabled</p></td>
<td><p>boolean</p></td>
<td><p>false</p></td>
<td><p>When <cite>spill_enabled</cite> is true, determines whether to spill memory to disk for aggregations to avoid exceeding
memory limits for the query.</p></td>
</tr>
<tr class="row-odd"><td><p>join_spill_enabled</p></td>
<td><p>boolean</p></td>
<td><p>false</p></td>
<td><p>When <cite>spill_enabled</cite> is true, determines whether to spill memory to disk for hash joins to avoid exceeding memory
limits for the query.</p></td>
</tr>
<tr class="row-even"><td><p>order_by_spill_enabled</p></td>
<td><p>boolean</p></td>
<td><p>false</p></td>
<td><p>When <cite>spill_enabled</cite> is true, determines whether to spill memory to disk for order by to avoid exceeding memory
limits for the query.</p></td>
</tr>
<tr class="row-odd"><td><p>aggregation_spill_memory_threshold</p></td>
<td><p>integer</p></td>
<td><p>0</p></td>
<td><p>Maximum amount of memory in bytes that a final aggregation can use before spilling. 0 means unlimited.</p></td>
</tr>
<tr class="row-even"><td><p>join_spill_memory_threshold</p></td>
<td><p>integer</p></td>
<td><p>0</p></td>
<td><p>Maximum amount of memory in bytes that a hash join build side can use before spilling. 0 means unlimited.</p></td>
</tr>
<tr class="row-odd"><td><p>order_by_spill_memory_threshold</p></td>
<td><p>integer</p></td>
<td><p>0</p></td>
<td><p>Maximum amount of memory in bytes that an order by can use before spilling. 0 means unlimited.</p></td>
</tr>
<tr class="row-even"><td><p>spillable-reservation-growth-pct</p></td>
<td><p>integer</p></td>
<td><p>25</p></td>
<td><p>The spillable memory reservation growth percentage of the current memory reservation size. Suppose a growth
percentage of N and the current memory reservation size of M, the next memory reservation size will be
M * (1 + N / 100). After growing the memory reservation K times, the memory reservation size will be
M * (1 + N / 100) ^ K. Hence the memory reservation grows along a series of powers of (1 + N / 100).
If the memory reservation fails, it starts spilling.</p></td>
</tr>
<tr class="row-odd"><td><p>max-spill-level</p></td>
<td><p>integer</p></td>
<td><p>4</p></td>
<td><p>The maximum allowed spilling level with zero being the initial spilling level. Applies to hash join build
spilling which might use recursive spilling when the build table is very large. -1 means unlimited.
In this case an extremely large query might run out of spilling partition bits. The max spill level
can be used to prevent a query from using too much io and cpu resources.</p></td>
</tr>
<tr class="row-even"><td><p>max-spill-file-size</p></td>
<td><p>integer</p></td>
<td><p>0</p></td>
<td><p>The maximum allowed spill file size. Zero means unlimited.</p></td>
</tr>
<tr class="row-odd"><td><p>min-spill-run-size</p></td>
<td><p>integer</p></td>
<td><p>256MB</p></td>
<td><p>The minimum spill run size (bytes) limit used to select partitions for spilling. The spiller tries to spill a
previously spilled partitions if its data size exceeds this limit, otherwise it spills the partition with most data.
If the limit is zero, then the spiller always spills a previously spilled partition if it has any data. This is
to avoid spill from a partition with a small amount of data which might result in generating too many small
spilled files.</p></td>
</tr>
</tbody>
</table>
</section>
<section id="hive-connector">
<h2>Hive Connector<a class="headerlink" href="#hive-connector" title="Permalink to this heading">¶</a></h2>
<table class="docutils align-default">
<colgroup>
<col style="width: 18%" />
<col style="width: 9%" />
<col style="width: 9%" />
<col style="width: 64%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Property Name</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Default Value</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>max_partitions_per_writers</p></td>
<td><p>integer</p></td>
<td><p>100</p></td>
<td><p>Maximum number of partitions per a single table writer instance.</p></td>
</tr>
<tr class="row-odd"><td><p>insert_existing_partitions_behavior</p></td>
<td><p>string</p></td>
<td><p>ERROR</p></td>
<td><p><strong>Allowed values:</strong> <code class="docutils literal notranslate"><span class="pre">OVERWRITE</span></code>, <code class="docutils literal notranslate"><span class="pre">ERROR</span></code>. The behavior on insert existing partitions. This property only derives
the update mode field of the table writer operator output. <code class="docutils literal notranslate"><span class="pre">OVERWRITE</span></code>
sets the update mode to indicate overwriting a partition if exists. <code class="docutils literal notranslate"><span class="pre">ERROR</span></code> sets the update mode to indicate
error throwing if writing to an existing partition.</p></td>
</tr>
<tr class="row-even"><td><p>immutable_partitions</p></td>
<td><p>bool</p></td>
<td><p>false</p></td>
<td><p>True if appending data to an existing unpartitioned table is allowed. Currently this configuration does not
support appending to existing partitions.</p></td>
</tr>
</tbody>
</table>
<section id="amazon-s3-configuration">
<h3><code class="docutils literal notranslate"><span class="pre">Amazon</span> <span class="pre">S3</span> <span class="pre">Configuration</span></code><a class="headerlink" href="#amazon-s3-configuration" title="Permalink to this heading">¶</a></h3>
<table class="docutils align-default">
<colgroup>
<col style="width: 25%" />
<col style="width: 8%" />
<col style="width: 8%" />
<col style="width: 58%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Property Name</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Default Value</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>hive.s3.use-instance-credentials</p></td>
<td><p>bool</p></td>
<td><p>true</p></td>
<td><p>Use the EC2 metadata service to retrieve API credentials. This works with IAM roles in EC2.</p></td>
</tr>
<tr class="row-odd"><td><p>hive.s3.aws-access-key</p></td>
<td><p>string</p></td>
<td></td>
<td><p>Default AWS access key to use.</p></td>
</tr>
<tr class="row-even"><td><p>hive.s3.aws-secret-key</p></td>
<td><p>string</p></td>
<td></td>
<td><p>Default AWS secret key to use.</p></td>
</tr>
<tr class="row-odd"><td><p>hive.s3.endpoint</p></td>
<td><p>string</p></td>
<td></td>
<td><p>The S3 storage endpoint server. This can be used to connect to an S3-compatible storage system instead of AWS.</p></td>
</tr>
<tr class="row-even"><td><p>hive.s3.path-style-access</p></td>
<td><p>bool</p></td>
<td><p>false</p></td>
<td><p>Use path-style access for all requests to the S3-compatible storage. This is for S3-compatible storage that
doesn’t support virtual-hosted-style access.</p></td>
</tr>
<tr class="row-odd"><td><p>hive.s3.ssl.enabled</p></td>
<td><p>bool</p></td>
<td><p>true</p></td>
<td><p>Use HTTPS to communicate with the S3 API.</p></td>
</tr>
<tr class="row-even"><td><p>hive.s3.log-level</p></td>
<td><p>string</p></td>
<td><p>FATAL</p></td>
<td><p><strong>Allowed values:</strong> “OFF”, “FATAL”, “ERROR”, “WARN”, “INFO”, “DEBUG”, “TRACE”
Granularity of logging generated by the AWS C++ SDK library.</p></td>
</tr>
<tr class="row-odd"><td><p>hive.s3.iam-role</p></td>
<td><p>string</p></td>
<td></td>
<td><p>IAM role to assume.</p></td>
</tr>
<tr class="row-even"><td><p>hive.s3.iam-role-session-name</p></td>
<td><p>string</p></td>
<td><p>velox-session</p></td>
<td><p>Session name associated with the IAM role.</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="spark-specific-configuration">
<h2>Spark-specific Configuration<a class="headerlink" href="#spark-specific-configuration" title="Permalink to this heading">¶</a></h2>
<table class="docutils align-default">
<colgroup>
<col style="width: 18%" />
<col style="width: 9%" />
<col style="width: 9%" />
<col style="width: 64%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Property Name</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Default Value</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>spark.legacy-size-of-null</p></td>
<td><p>bool</p></td>
<td><p>true</p></td>
<td><p>If false, <code class="docutils literal notranslate"><span class="pre">size</span></code> function returns null for null input.</p></td>
</tr>
</tbody>
</table>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <div>
    <h3><a href="index.html">Table of Contents</a></h3>
    <ul>
<li><a class="reference internal" href="#">Configuration properties</a><ul>
<li><a class="reference internal" href="#generic-configuration">Generic Configuration</a></li>
<li><a class="reference internal" href="#memory-management">Memory Management</a></li>
<li><a class="reference internal" href="#spilling">Spilling</a></li>
<li><a class="reference internal" href="#hive-connector">Hive Connector</a><ul>
<li><a class="reference internal" href="#amazon-s3-configuration"><code class="docutils literal notranslate"><span class="pre">Amazon</span> <span class="pre">S3</span> <span class="pre">Configuration</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#spark-specific-configuration">Spark-specific Configuration</a></li>
</ul>
</li>
</ul>

  </div>
  <div>
    <h4>Previous topic</h4>
    <p class="topless"><a href="functions/spark/aggregate.html"
                          title="previous chapter">Aggregate Functions</a></p>
  </div>
  <div>
    <h4>Next topic</h4>
    <p class="topless"><a href="bindings/python/README_generated_pyvelox.html"
                          title="next chapter">PyVelox: Python bindings and extensions for Velox</a></p>
  </div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/configs.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="bindings/python/README_generated_pyvelox.html" title="PyVelox: Python bindings and extensions for Velox"
             >next</a> |</li>
        <li class="right" >
          <a href="functions/spark/aggregate.html" title="Aggregate Functions"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Velox  documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Configuration properties</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright TBD.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 5.0.2.
    </div>
  </body>
</html>